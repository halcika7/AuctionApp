<app-breadcrumb
  title="shop"
  [other]="[
    { value: 'shop /', link: '/shop' },
    { value: subcategory, link: '' }
  ]"
></app-breadcrumb>

<section class="shop-page container">
  <div class="filters">
    <ul class="categories">
      <h4>Product Categories</h4>
      <li
        [defaultOpen]="categoryId === category.id"
        appDropdownNoautoclose
        *ngFor="let category of categories"
      >
        {{ category.name }}
        <ul>
          <li
            [ngClass]="{ active: subcategoryId === subcategory.id }"
            *ngFor="let subcategory of category.Subcategories"
          >
            <a [routerLink]="['/shop', category.id, subcategory.id]"
              >{{ subcategory.name }} ({{ subcategory.number_of_products }})</a
            >
          </li>
        </ul>
      </li>
    </ul>
    <ul class="colors">
      <h4>Brands</h4>
      <li
        *ngFor="let brand of brands"
        [ngClass]="{ active: brandId === brand.id }"
      >
        <p (click)="filterClicked(true, brand.id)">
          {{ brand.name }} ({{ brand.number_of_products }})
        </p>
      </li>
    </ul>
    <ng-template [ngIf]="showIfKeysLength(prices)">
      <div class="price">
        <h4>Filter By Price</h4>
        <ng5-slider
          [value]="minValue"
          [highValue]="maxValue"
          [options]="options"
          (userChangeEnd)="changeValues($event)"
        ></ng5-slider>
        <p>
          {{ prices.min_price | currency }} - {{ prices.max_price | currency }}
        </p>
        <p>The average price is {{ prices.avg_price | currency }}.</p>
      </div>
    </ng-template>
    <ul class="colors" *ngFor="let filter of filters">
      <h4>{{ filter.name }}</h4>
      <li
        *ngFor="let vals of filter.FilterValues"
        [ngClass]="{
          active: checkActivity(vals.id)
        }"
      >
        <p (click)="filterClicked(false, filter.id, vals.id)">
          {{ vals.value }} ({{ vals.Products.length }})
        </p>
      </li>
    </ul>
  </div>
  <div class="products">
    <div class="navigation">
      <div class="dropdown">
        <p appDropdownNoautoclose>Default Sorting</p>
        <ul>
          <li class="active">Default Sorting</li>
          <li>Sort by Price Descending</li>
          <li>Sort by Price Ascending</li>
          <li>Sort by Time Left Descending</li>
          <li>Sort by Time Left Ascending</li>
        </ul>
      </div>
      <div class="gridlist">
        <span
          [ngClass]="{ active: productsLayout !== 'list' }"
          (click)="changeProductsLayout('three-cols auto')"
          ><fa-icon [icon]="['fas', 'th']"></fa-icon>Grid</span
        >
        <span
          [ngClass]="{ active: productsLayout === 'list' }"
          (click)="changeProductsLayout('list')"
          ><fa-icon [icon]="['fas', 'th-list']"></fa-icon>List</span
        >
      </div>
    </div>
    <app-landing-page-products
      [list]="productsLayout === 'list' ? true : false"
      [className]="productsLayout"
      padding="paddingL15"
      [containerClass]="false"
      [items]="products"
    ></app-landing-page-products>
    <button>LOAD MORE</button>
  </div>
</section>
