<section class="table">
  <table [ngClass]="{ 'mw-1800': type === 'bids' }">
    <thead>
      <tr>
        <td>Item</td>
        <td>Name</td>
        <td>Time left</td>
        <td *ngIf="type === 'bids'">Bid date</td>
        <td>Price</td>
        <td *ngIf="type === 'bids'">Your bid</td>
        <td>No. bids</td>
        <td>Highest bid</td>
        <td>Status</td>
        <td></td>
      </tr>
    </thead>
    <tbody>
      <ng-template [ngIf]="type === 'products'">
        <tr *ngFor="let item of values">
          <td>
            <img [src]="item.picture" alt="" />
          </td>
          <td>
            {{ item.name }}
          </td>
          <td>
            {{
              item.status === "open"
                ? (item.auctionEnd | dateAgo: [{ agoOrLeft: "left" }])
                : "0"
            }}
          </td>
          <td>{{ item.price | currency }}</td>
          <td>{{ item.number_of_bids }}</td>
          <td [ngClass]="{ 'highest-bid': item.highest_bid > item.price }">
            {{ item.highest_bid | currency }}
          </td>
          <td>
            <span [ngClass]="{ active: item.status === 'open' }">{{
              item.status
            }}</span>
          </td>
          <td>
            <a [routerLink]="['/shop/products', item.subcategoryId, item.id]"
              >View</a
            >
          </td>
        </tr>
      </ng-template>
      <ng-template [ngIf]="type === 'bids' && values.length > 0">
        <ng-template ngFor let-item [ngForOf]="values">
          <tr class="spacer">
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr
            [ngClass]="{
              won:
                item.Product.status === 'closed' &&
                item.price === item.Product.highest_bid
            }"
          >
            <td>
              <img [src]="item.Product.picture" alt="" />
            </td>
            <td>
              {{ item.Product.name }}
            </td>
            <td>
              {{
                item.Product.status === "open"
                  ? (item.Product.auctionEnd | dateAgo: [{ agoOrLeft: "left" }])
                  : "0"
              }}
            </td>
            <td>{{ item.createdAt | date: "dd MMM yyyy" }}</td>
            <td>{{ item.Product.price | currency }}</td>
            <td
              [ngClass]="{
                'highest-bid': item.Product.highest_bid === item.price
              }"
            >
              {{ item.price | currency }}
            </td>
            <td>{{ item.Product.number_of_bids }}</td>
            <td
              [ngClass]="{
                'highest-bid': item.Product.highest_bid === item.price,
                bid: item.Product.highest_bid > item.price
              }"
            >
              {{ item.Product.highest_bid | currency }}
            </td>
            <td>
              <span [ngClass]="{ active: item.Product.status === 'open' }">{{
                item.Product.status
              }}</span>
            </td>
            <td>
              <a
                *ngIf="
                  item.Product.status !== 'closed'
                "
                [routerLink]="[
                  '/shop/products',
                  item.Product.subcategoryId,
                  item.Product.id
                ]"
                >View</a
              >
              <a
                *ngIf="
                  item.Product.status === 'closed' &&
                  item.price === item.Product.highest_bid &&
                  item.Product.paid !== 't'
                "
                [ngClass]="{
                  won:
                    item.Product.status === 'closed' &&
                    item.price === item.Product.highest_bid
                }"
                [routerLink]="[
                  '/shop/payment',
                  item.Product.subcategoryId,
                  item.Product.id
                ]"
                >Pay</a
              >
            </td>
          </tr>
        </ng-template>
        <tr class="spacer">
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </ng-template>
    </tbody>
  </table>
  <p *ngIf="values.length === 0">No items</p>
</section>
